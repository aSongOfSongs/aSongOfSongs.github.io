(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88abbcaa"],{"104a":function(e,t,s){"use strict";var n=s("ce2d"),a=s.n(n);a.a},"7ae4":function(e,t,s){"use strict";var n=s("9a5e"),a=s.n(n);a.a},"9a5e":function(e,t,s){},b83a:function(e,t,s){"use strict";s.r(t);var n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bg-box wrap1440 mb100"},[s("div",{staticClass:"border-box"},[s("div",{staticClass:"title"},[s("h3",[e._v(e._s(e.$t("continue_pay_details")))])]),e._l(e.content,(function(t){return s("div",{staticClass:"border-content"},[s("div",{staticClass:"tools-head"},[s("div",{staticClass:"l-wrap"},[s("span",[e._v("ID:"+e._s(t.continue_pay_order_id))]),t.pay_success&&t.rest_dbc_count>0&&!t.main_order_is_over?s("span",{staticClass:"tools-title"},[e._v("       "+e._s(e.$t("gpu.remainingTime"))+"："+e._s(e.$secToDate(60*t.rest_time_rent,"DHM")))]):e._e()]),s("div",{staticClass:"r-wrap"},[t.order_is_cancer?s("span",[e._v(e._s(e.$t("my_machine_order_cancer")))]):0===t.rest_dbc_count||t.main_order_is_over?s("span",[e._v(e._s(e.$t("continue_pay_order_is_over")))]):t.pay_success?s("span",[e._v(e._s(e.$t("continue_pay_success")))]):t.pay_error&&!t.return_dbc?s("span",[e._v(e._s(e.$t("my_machine_order_pay_error")))]):t.pay_error&&t.return_dbc?s("span",[e._v(e._s(e.$t("my_machine_order_return_dbc")))]):e._e()])]),s("div",{staticClass:"pay-wrap"},[s("div",[s("span",{staticClass:"td"},[e._v(e._s(e.$t("continue_pay_time"))+"："+e._s(parseInt(t.rent_time_length/60))+e._s(e.$t("my_machine_hour"))+e._s(t.rent_time_length%60)+e._s(e.$t("my_machine_min")))]),s("span",{staticClass:"td"},[e._v(e._s(e.$t("my_machine_beused_time"))+"："+e._s(parseInt(t.real_rent_time/60))+e._s(e.$t("my_machine_hour"))+e._s(t.real_rent_time%60)+e._s(e.$t("my_machine_min")))]),s("span",{staticClass:"td"},[e._v(e._s(e.$t("gpu.payDBCs"))+"："+e._s(t.dbc_total_count)+" DBC")])]),s("div",[s("span",{staticClass:"td"},[e._v(e._s(e.$t("gpu.actualPrice"))+"："+e._s(t.dbc_real_need_count)+" DBC")]),s("span",{staticClass:"td"},[e._v(e._s(e.$t("gpu.gpuBilling"))+"：$ "+e._s(t.gpu_price_dollar)+"/"+e._s(e.$t("my_machine_hour")))]),s("span",{staticClass:"td"},[e._v(e._s(e.$t("gpu.payPrice"))+"：$ "+e._s(t.dbc_price.toFixed(4)))])])]),s("div",{staticClass:"tools-head"},[s("div",{staticClass:"l-wrap"},[!0===t.vocing?s("span",[e._v(e._s(e.$t("myMachine_is_pay_vocing")))]):!e.isPaying||t.order_is_cancer||t.pay_success||t.pay_error?e.local_pay_error&&!e.isPaying?s("span",{staticClass:"cRed"},[e._v(e._s(e.$t("myMachine_is_transfer_error")))]):!t.vocing_pay||t.order_is_cancer||t.pay_success||t.pay_error?!1===t.pay_success&&!1===t.order_is_cancer&&!1===t.pay_error?s("span",[e._v(e._s(e.$t("myMachine_confirm_pay_tip")))]):e._e():s("span",{staticClass:"cRed"},[e._v(e._s(e.$t("my_machine_order_vocing_pay")))]):s("span",{staticClass:"cRed"},[e._v(e._s(e.$t("myMachine_is_dbc_transfering")))])]),!1===t.pay_success&&!1===t.order_is_cancer?s("div",{staticClass:"r-wrap"},[[!1===t.pay_error?s("el-button",{staticClass:"tool-btn",attrs:{disabled:t.vocing_pay,plain:"",loading:e.isPaying,size:"mini"},on:{click:function(s){return e.payOrder(t)}}},[e._v(e._s(e.$t("myMachine_confirm_pay")))]):e._e(),t.vocing_pay||!1!==t.pay_error?e._e():s("el-button",{staticClass:"tool-btn",attrs:{disabled:e.isPaying,size:"mini",plain:""},on:{click:function(s){return e.cancelOrder(t)}}},[e._v(e._s(e.$t("myMachine_concer_order")))])],!1!==t.return_dbc||!0!==t.pay_error||t.main_order_is_over?e._e():s("el-button",{staticClass:"tool-btn",staticStyle:{width:"86px"},attrs:{plain:"",size:"mini"},on:{click:function(s){return e.openReturnDbc(t)}}},[e._v(e._s(e.$t("myMachine_return_dbc")))])],2):e._e()])])}))],2),s("dlg-return-dbc-continue",{attrs:{open:e.dlgReturnDbc_open,item:e.curItem},on:{"update:open":function(t){e.dlgReturnDbc_open=t},success:e.returnSuccess}})],1)},a=[],i=s("365c"),r=s("4795"),c=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-dialog",{attrs:{visible:e.isOpen,width:"540px"},on:{"update:visible":function(t){e.isOpen=t},close:e.closed}},[s("div",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(e.$t("dlg_return_dbc")))]),s("div",{staticClass:"dlg-content"},[s("div",{staticClass:"midInfo mt20"},[e.item?s("p",[e._v(e._s(e.$t("gpu.backDbcNum"))+": "+e._s(e.item.dbc_total_count)+"DBC")]):e._e(),s("div",[s("span",{}),s("span")]),s("el-form",[s("el-form-item",{attrs:{label:e.$t("dlg_input_code")}},[s("el-input",{staticStyle:{width:"200px"},attrs:{size:"small"},model:{value:e.code,callback:function(t){e.code=t},expression:"code"}}),s("el-button",{staticClass:"ml10",attrs:{loading:e.isCoding,plain:"",size:"mini"},on:{click:e.getCode}},[e._v(e._s(e.$t("dlg_get_code")))])],1)],1)],1)]),s("div",{staticClass:"dlg-bottom"},[s("el-button",{staticClass:"dlg-btn",attrs:{loading:e.isLoading,type:"primary",size:"small"},on:{click:e.confirm}},[e._v(e._s(e.$t("confirm")))]),s("el-button",{staticClass:"dlg-btn",attrs:{plain:"",size:"small"},on:{click:e.cancel}},[e._v(e._s(e.$t("cancel")))])],1)])},o=[],_={name:"popupReturnContinue",props:{open:Boolean,item:Object},watch:{open:function(e){this.isOpen=e}},data:function(){return{isOpen:this.open,isLoading:!1,isCoding:!1,code:""}},methods:{closed:function(){this.isOpen=!1,this.$emit("update:open",!1)},getCode:function(){var e=this;this.isCoding=!0;var t=this.$t("website_name"),s=this.$i18n.locale;Object(i["p"])({continue_pay_order_id:this.item.continue_pay_order_id,user_name_platform:t,language:s}).then((function(t){1===t.status?e.$message({showClose:!0,message:t.msg,type:"success"}):e.$message({showClose:!0,message:t.msg,type:"error"})})).finally((function(){e.isCoding=!1}))},confirm:function(){var e=this;this.isLoading=!0;var t=this.$t("website_name"),s=this.$i18n.locale;Object(i["o"])({continue_pay_order_id:this.item.continue_pay_order_id,return_code:this.code,user_name_platform:t,language:s}).then((function(t){1===t.status?(e.$message({showClose:!0,message:t.msg,type:"success"}),e.$emit("success"),e.closed()):e.$message({showClose:!0,message:t.msg,type:"success"})})).finally((function(){e.isLoading=!1}))},cancel:function(){this.closed()}}},l=_,u=(s("104a"),s("9ca4")),d=Object(u["a"])(l,c,o,!1,null,"4c58d39d",null),p=d.exports,m={name:"continuePayDetail",components:{DlgReturnDbcContinue:p},data:function(){return{rateValue:0,order_id:void 0,order_is_over:void 0,placeOrderData:void 0,content:[],isPaying:!1,local_pay_error:!1,isPocing:!1,queryOrderListSi:void 0,dlgReturnDbc_open:!1,si:void 0,curItem:void 0}},created:function(){var e=this;this.queryContinuePayDetail(),this.queryOrderListSi=setInterval((function(){!1===e.isPaying&&e.queryContinuePayDetail()}),5e3)},deactivated:function(){this.queryOrderListSi&&clearInterval(this.queryOrderListSi),this.si&&clearInterval(this.si)},computed:{},methods:{openReturnDbc:function(e){this.curItem=e,this.dlgReturnDbc_open=!0},cancelOrder:function(e){var t=this;Object(i["h"])({continue_pay_order_id:e.continue_pay_order_id,user_name_platform:this.$t("website_name"),language:this.$i18n.locale}).then((function(s){if(1!==s.status)return t.$message({showClose:!0,message:s.msg,type:"error"}),Promise.reject();t.$prompt(t.$t("myMachine_code_send"),t.$t("myMachine_cancer_order"),{confirmButtonText:t.$t("myMachine_confirm"),cancelButtonText:t.$t("myMachine_cancer")}).then((function(s){var n=s.value;return Object(i["g"])({continue_pay_order_id:e.continue_pay_order_id,cancer_code:n,user_name_platform:t.$t("website_name"),language:t.$i18n.locale})})).then((function(e){1===e.status?(t.$message({showClose:!0,message:e.msg,type:"success"}),t.queryContinuePayDetail()):t.$message({showClose:!0,message:e.msg,type:"error"})})).catch((function(e){e&&console.log(e)}))})).then((function(e){1===e.status&&t.$message({showClose:!0,message:e.msg,type:"success"})})).finally((function(){}))},payOrder:function(e){var t=this;clearInterval(this.si);var s=this.$t("website_name"),n=this.$i18n.locale;Object(i["F"])({order_id:e.order_id,user_name_platform:s,language:n}).then((function(s){if(1!==s.status||!s.content)return Promise.reject({status:-1,msg:"出现未知错误，无法续租"});var n=e.dbc_total_count+1*e.code;t.$confirm(t.$t("myMachine_no_double_pay"),t.$t("myMachine_please_confirm_pay"),{confirmButtonText:t.$t("myMachine_confirm"),cancelButtonText:t.$t("myMachine_cancer")}).then((function(e){e.value;return t.isPaying=!0,t.local_pay_error=!1,Object(r["l"])({toAddress:s.content,amount:n})})).then((function(s){if(1===s.status){console.log("转账成功");var n=s.response.txid;t.isPaying=!1,e.vocing_pay=!0;var a=t.$t("website_name"),r=t.$i18n.locale;Object(i["q"])({continue_pay_order_id:e.continue_pay_order_id,dbc_hash:n,user_name_platform:a,language:r}).then((function(s){e.vocing_pay=!0,t.queryContinuePayDetail(),1===s.status&&(clearInterval(t.si),e.vocing_pay=!1)})),t.si=setInterval((function(){return Object(i["q"])({continue_pay_order_id:e.continue_pay_order_id,dbc_hash:n,user_name_platform:a,language:r}).then((function(s){e.vocing_pay=!0,t.queryContinuePayDetail(),1===s.status&&(clearInterval(t.si),e.vocing_pay=!1)})).catch((function(e){e&&-1===e.status?(console.log(e.msg),t.$message({showClose:!0,message:e.msg,type:"error"}),clearInterval(t.si)):e&&-2===e.status?console.log(e.msg):e&&(console.log("其他报错"),console.log(e),clearInterval(t.si))}))}),5e3)}else t.isPaying=!1,clearInterval(t.si),t.local_pay_error=!0,console.log("转账失败")}))}))},isShowRendSuccessMsg:function(e){var t=((new Date).getTime()-e)/1e3/60;return t<10},queryContinuePayDetail:function(){var e=this;this.order_is_over=this.$route.query.order_is_over;var t=this.$t("website_name"),s=this.$i18n.locale;Object(i["C"])({order_id:this.$route.query.order_id,user_name_platform:t,language:s}).then((function(t){1===t.status&&(e.content=t.content)}))}}},y=m,g=(s("7ae4"),Object(u["a"])(y,n,a,!1,null,"4d935b47",null));t["default"]=g.exports},ce2d:function(e,t,s){}}]);
//# sourceMappingURL=chunk-88abbcaa.e88bb511.js.map